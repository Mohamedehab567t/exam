<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+SC&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{bootstrap}}">
    <link rel="stylesheet" href="{{font}}">
    <link rel="stylesheet" href="{{normalize}}">
    <link rel="stylesheet" href="{{A}}">
    <link rel="stylesheet" href="{{Bank}}">
    <title> بنك الاسئلة </title>
</head>
<body style="direction : rtl">
    <header>
        {% include 'BackNav.html' %}
    </header>
 <div class="parent">

    <div class="welcome-part alert alert-success">
        <p style="float:right">مرحبا بك يا  : {{user['first_name']}} في  لوحة تحكم <span class="Variable">{{Sett['site_name']}}</span></p>
        <div class="clearfix"></div>
        <p style="float:right">صفحة بنك الاسئلة للتصفح والتعديل والحذف بين الاسئلة</p>
        <div class="clearfix"></div>
    </div>
     <h4 style="text-align:center">ابحث في الاسئلة</h4>
     <div class="ConForSearch"  style="padding:5px; border-bottom : .2px solid grey; width:80%; margin:4px auto">
     <div style="display:flex; flex-direction:row; gap : 5px; width:80%; margin : 2px auto" id="FByName">
         <input type="text" id="NameOfQuestion" style="flex:5" class="form-control" placeholder="اكتب عنوان السؤال" autocomplete="off">
     </div>
         <div class="SearchDiv mb-2">
    {% for obj in ConfigQ %}
    {% if obj['type'] == 'select' %}
        <select class="form-control" name="{{obj['label']}}">
            <option value="" selected>اختر {{obj['label']}}</option>
            {% for option in obj['values'] %}
            <option value="{{option}}" >{{option}}</option>
            {% endfor %}
        </select>
    {% endif %}
    {%else%}
        <input type="text"  class="form-control" placeholder="{{obj}}">
    {% endfor %}
    </div>
    <div class="conOfBtn mb-4" style="display:flex; flex-direction:row; gap:5px; justify-content: center;">
        <button class="btn btn-success" id="SearchQ">بحث</button>
      </div>
</div>
     <div class="container" style="direction : rtl">
         {% if Q|length > 0 %}
         <div class="BankQ" id="BankQ" style="Width:100%; border:2px solid #02ab3a; padding:10px ">
        {% for q in Q %}
        <div class="card mb-2" id="{{q['_id']}}card">
              <div class="card-header" style="text-align:center">
                  <span style="font-weight:700">{{loop.index}}</span>
              </div>
              <div class="card-body">
                  <h6 style="text-align:center">عنوان السؤال</h6>
                  <div class="form-group">
                      <input style="width : 100%" type="text" id="{{q['_id']}}title" value="{{q['Q-title']}}" class="form-control titles">
                  </div>

                  <div class="clearfix"></div>
                {% if q['Q-type'] == 'text' %}
                  {% for choice in q['Choices'] %}
                  <div class="row">
                      <div class="col">
                  <div class="form-group">
                      <input  type="text" value="{{choice[0]}}" class="form-control {{q['_id']}}choice">
                  </div>
                      </div>
                      <div class="col">
                <div class="form-group">
                      <input type="text" value="{{q['score'][loop.index -1 ]}}" class="form-control {{q['_id']}}score">
                  </div>
                      </div>
                  </div>

                  {% endfor %}
                  {% endif %}
                  <div class="conOfBtn" style="display:flex; flex-direction:row; gap:5px; justify-content: center;">
                <button class="btn btn-success UpdateQ" data-sid="{{q['_id']}}">تعديل</button>
                <button class="btn btn-danger  DeleteQ"  data-sid="{{q['_id']}}">حذف</button>
                  </div>
              </div>
        </div>
             <hr>
            {% endfor %}
         </div>
         {% else %}
        <div style="text-align:center" class="ConSpan mt-3">
               <h6>لا يوجد اسئلة بعد</h6>
          <div class="conOfBtn" style="display:flex; flex-direction:row; gap:5px; justify-content: center;">
                <a href="{{url_for('AddingQ')}}" class="btn btn-success">اضغط هنا لاضافة اسئلة</a>
          </div>
           </div>
         {% endif %}
     </div>

    </div>

    <div class="d-flex justify-content-center Loading">
        <div class="spinner-border text-success" style="margin:auto" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
        <script src="{{ url_for('static' , filename='js/jquery-3.5.1.js') }}"></script>
        <script src="{{ url_for('static' , filename='js/popper.js') }}"></script>
        <script src="{{ url_for('static' , filename='js/bootstrap.js') }}"></script>
        <script src="{{ url_for('static' , filename='js/BankOfQ.js') }}"></script>
    <script>
        $('.Loading').attr('style' , 'display : none !important;')
    </script>
</body>
</html>